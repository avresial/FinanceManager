@using ApexCharts
@using FinanceManager.Core.Entities
@using FinanceManager.Core.Repositories

@inject IBankAccountRepository bankAccountRepository;

<div class="card">
	<div class="card-body">
		<h5 class="card-title">Total net worth</h5>
		<h1 class="card-subtitle mb-2 text-muted">$@TotalNetWorth</h1>
	</div>
</div>



@code {
	IEnumerable<BankAccount> bankAccounts;
	decimal TotalNetWorth = 0;

	protected override async Task OnInitializedAsync()
	{
		await Task.Run(() =>
		{
			bankAccounts = bankAccountRepository.Get();
			TotalNetWorth = bankAccounts.Where(x => x.Entries.Any()).Sum(x => x.Entries.Last().Balance);

		});

	}
}

