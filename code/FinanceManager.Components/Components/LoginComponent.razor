@using Blazored.LocalStorage
@using Blazored.SessionStorage
@using FinanceManager.Domain.Repositories
@using FinanceManager.Components.ViewModels
@using FinanceManager.Domain.Repositories.Account
@using Microsoft.AspNetCore.Components.Authorization
@using Microsoft.AspNetCore.Components.Forms

<MudContainer MaxWidth="MaxWidth.Small" style="height:100vh;" Class="d-flex flex-column justify-center">
    <MudGrid Justify="Justify.Center">
        <MudItem sm="10" xs="12">
            <MudPaper Class="p-5">
                <MudText Typo="Typo.h4" Class="text-center mb-3 mt-3">Finance Manager</MudText>
                <MudText Typo="Typo.h2" Class="mb-4 fs-6 fw-normal text-center"> Sign in to your account</MudText>
                @if (_errors is not null)
                {
                    @foreach (var error in _errors)
                    {
                        <MudAlert Severity="Severity.Error" Class="my-3">@error</MudAlert>
                    }
                }
                <MudForm @ref="_form" @bind-IsValid="@_success" @bind-Errors="@_errors">
                    <MudTextField @bind-Value="_loginModel.Login" T="string" Label="Login" Variant="Variant.Outlined" Immediate Required Class="mt-5" />
                    <MudTextField @bind-Value="_loginModel.Password" T="string" Label="Password" Variant="Variant.Outlined" Class="mb-5" Immediate Required InputType="InputType.Password" />

                    <MudButton Class="my-2" Variant="Variant.Filled" Color="Color.Primary" type="submit" @onclick=Login>
                        <MudText Typo="Typo.h5">Login</MudText>
                    </MudButton>
                    <MudButton Href="register" Class="my-2" Variant="Variant.Outlined" Color="Color.Primary">
                        <MudText Typo="Typo.h5">Register</MudText>
                    </MudButton>
                    <MudLink Href="landingpage" Class="mt-3">
                        <MudText Typo="Typo.subtitle1">Learn more</MudText>
                    </MudLink>
                    <MudLink @onclick=LogGuest>
                        <MudText Typo="Typo.subtitle1">Check out demo</MudText>
                    </MudLink>
                </MudForm>
            </MudPaper>
        </MudItem>
    </MudGrid>
</MudContainer>