@using ApexCharts
@using FinanceManager.Domain.Entities.Accounts
@using FinanceManager.Domain.Extensions
@using FinanceManager.Domain.Entities
@using FinanceManager.Domain.Repositories
@using FinanceManager.Domain.Repositories.Account
@using FinanceManager.Domain.Services
@using FinanceManager.Components.Helpers

<MudCard Outlined Class="d-flex flex-nowrap " Style="@($"height:{Height};")">
    <MudPaper Class="flex-grow-0 p-3" Elevation="0">
        <MudText Typo=Typo.h5>Income source</MudText>
        @if ( ChartData.Any())
        {
            <MudText Typo=Typo.h6 Class="mb-2 text-muted">@Total @_currency</MudText>
        }
    </MudPaper>
    <MudPaper Class="flex-grow-1 overflow-auto" Elevation="0">
        @if (ChartData.Any())
        {
            <ApexChart @ref="_chart" TItem="IncomeSourceOverviewEntry" Height="@("100%")" Options="options">
                <ApexPointSeries TItem="IncomeSourceOverviewEntry"
                                 Items="ChartData"
                                 Name="Income"
                                 XValue="@(e => e.Source)"
                                 YValue="e=> e.Value"
                                 SeriesType="SeriesType.Bar" />

            </ApexChart>
        }
        else
        {
            <div class="d-flex flex-grow-1 justify-center align-content-center flex-wrap">
                <MudText Typo="Typo.button" HtmlTag="h3">No data</MudText>
            </div>
        }
    </MudPaper>
</MudCard>