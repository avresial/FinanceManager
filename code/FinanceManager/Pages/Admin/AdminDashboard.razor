@page "/Admin/Dashboard"
@attribute [Authorize(Roles = "Admin")]
@layout AdminLayout

@using FinanceManager.Domain.Enums
@using Microsoft.AspNetCore.Authorization

<MudGrid Spacing="3">
    <MudItem xs="3">
        <MudCard Outlined>
            <MudCardContent>
                <MudPaper Class="d-flex justify-start gap-3 flex-grow-1 flex-column px-3 py-1" Elevation="0">
                    <MudText>Total users count</MudText>
                    <MudText Typo="Typo.h3" Color="Color.Primary"><b>@_userCount</b></MudText>
                    <MudStack Row>
                        <MudIcon Icon="@Icons.Material.Filled.TrendingUp" Title="TrendingUp" />
                        <MudText Typo="Typo.subtitle2">?%</MudText>
                    </MudStack>
                </MudPaper>
            </MudCardContent>
        </MudCard>
    </MudItem>

    <MudItem xs="3">
        <MudCard Outlined>
            <MudCardContent>
                <MudPaper Class="d-flex justify-start gap-3 flex-grow-1 flex-column px-3 py-1" Elevation="0">
                    <MudText>Accounts count</MudText>
                    <MudText Typo="Typo.h3" Color="Color.Primary"><b>?</b></MudText>
                    <MudStack Row>
                        <MudIcon Icon="@Icons.Material.Filled.TrendingFlat" Title="TrendingFlat" />
                        <MudText Typo="Typo.subtitle2">?%</MudText>
                    </MudStack>
                </MudPaper>
            </MudCardContent>
        </MudCard>
    </MudItem>

    <MudItem xs="3">
        <MudCard Outlined>
            <MudCardContent>
                <MudPaper Class="d-flex justify-start gap-3 flex-grow-1 flex-column px-3 py-1" Elevation="0">
                    <MudText>Total tracked money</MudText>
                    <MudText Typo="Typo.h3" Color="Color.Primary"><b>?</b></MudText>
                    <MudStack Row>
                        <MudIcon Icon="@Icons.Material.Filled.TrendingDown" Title="TrendingDown" />
                        <MudText Typo="Typo.subtitle2">?%</MudText>
                    </MudStack>
                </MudPaper>
            </MudCardContent>
        </MudCard>
    </MudItem>

    <MudItem xs="3">
        <MudCard Outlined>
            <MudCardContent>
                <MudPaper Class="d-flex justify-start gap-3 flex-grow-1 flex-column px-3 py-1" Elevation="0">
                    <MudText>Other metric</MudText>
                    <MudText Typo="Typo.h3" Color="Color.Primary"><b>?</b></MudText>
                    <MudStack Row>
                        <MudIcon Icon="@Icons.Material.Filled.TrendingUp" Title="TrendingUp" />
                        <MudText Typo="Typo.subtitle2">?%</MudText>
                    </MudStack>
                </MudPaper>
            </MudCardContent>
        </MudCard>
    </MudItem>

    <MudItem xs="6">
        <MudCard Outlined>
            <MudCardContent>
                <MudText>Daily active users</MudText>
                @if (_dailyAcriveUsersSeries is not null)
                {

                    <MudChart ChartType="ChartType.Bar" ChartSeries="@_dailyAcriveUsersSeries" Width="100%" Height="300px" ChartOptions="_axisChartOptions" />
                }
                else
                {
                    <ChartSpinner />
                }
            </MudCardContent>
        </MudCard>
    </MudItem>

    <MudItem xs="6">
        <MudCard Outlined>
            <MudCardContent>
                <MudText>New users</MudText>
                @if (_newUsersSeries is not null)
                {
                    <MudChart ChartType="ChartType.Bar" ChartSeries="@_newUsersSeries" Width="100%" Height="300px" ChartOptions="_axisChartOptions" />
                }
                else
                {
                    <ChartSpinner />
                }
            </MudCardContent>
        </MudCard>
    </MudItem>
</MudGrid>

